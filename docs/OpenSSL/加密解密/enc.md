# enc

通过指定的cipher对输入的内容加密和解密(==对称加密==)

sytanx：`openssl enc -cipher [options]`

```
root in /usr/local/\/ssl λopenssl enc -des -pbkdf2 -iter 3 -in /etc/resolv.conf 
enter des-cbc encryption password:
Verifying - enter des-cbc encryption password:
Salted__f�FĀ�
               y��A�s�Q�dQI�b��
                                       2Z&�rr��I!��jK�;Y.�JG�6l�"L���5 m%n�����7���r��Sw��`�/-f��������dc�x/9�#root in /usr/local/\/ssl λ 

root in /usr/local/\/ssl λ openssl enc -des -pbkdf2 -iter 3 -d -in encrypt                
enter des-cbc decryption password:
# Generated by NetworkManager
search localdomain
nameserver 114.114.114.114
nameserver 8.8.8.8
```

- `-e`

  对输入的内容加密，默认值

- `-iter <count>`

  指定加密或解密迭代的次数，迭代次数越高安全性越高

- `-pbkdf2`

  使用pbkdf2加密算法对迭代次数加密和解密

- `-d`

  对输入的内容解密

  ```
  root in /usr/local/\/ssl λ openssl enc -des -e -in rsa -out rsa.sym
  enter des-cbc encryption password:
  Verifying - enter des-cbc encryption password:
  *** WARNING : deprecated key derivation used.
  Using -iter or -pbkdf2 would be better.
  
  
  root in /usr/local/\/ssl λ openssl enc -des -d -in rsa.sym
  enter des-cbc decryption password:
  *** WARNING : deprecated key derivation used.
  Using -iter or -pbkdf2 would be better.
  -----BEGIN RSA PRIVATE KEY-----
  MIIBOwIBAAJBAMApGPfOKzxNfmfRSrDGEt48oSU7zZNOoaHBbIGYfW0xMRh/MbPO
  e8hVDPdnjVDPIqZh/vi0dUwleZWwIgIBeiMCAwEAAQJAYxKNUe4U8oFNw77vUFa/
  EZ+Wwbikk+c9hEVSaTqyqCGIBp3N6RA74a5MtVrK+GFJSxuWtct08pfZ/wgMj7eq
  gQIhAPISfJk+B+ZksaIRFxZWGyLBhZ0t3mJrdRaO/wM5t5tjAiEAyzd0iJLDFWqX
  lntehD6MURR8uS783+VAZSfv2T12wkECIA0ZBvjbrF3A8QON3SvuOMWmpu4cPz4g
  BlPUJOQtyUt1AiEAx+ukj3+iwHz+6KIyF/PY4yM+mIgrarEEqv+hLJ0VKoECIQCU
  hCig1R5aipSUWADVbxjyUCiKRmmJqzosrzIMjrWa1Q==
  ```

- `-a`

  对数据进行base64加密，通过`-d`指定对数据进行base64解密

  ```
  root in /usr/local/\/ssl λ openssl enc  -a -in /etc/resolv.conf
  IyBHZW5lcmF0ZWQgYnkgTmV0d29ya01hbmFnZXIKc2VhcmNoIGxvY2FsZG9tYWlu
  Cm5hbWVzZXJ2ZXIgMTE0LjExNC4xMTQuMTE0Cm5hbWVzZXJ2ZXIgOC44LjguOAo=
  
  root in /usr/local/\/ssl λ cat base64                                  
    File: base64
    IyBHZW5lcmF0ZWQgYnkgTmV0d29ya01hbmFnZXIKc2VhcmNoIGxvY2FsZG9tYWluCm5hbWVzZXJ2
    ZXIgMTE0LjExNC4xMTQuMTE0Cm5hbWVzZXJ2ZXIgOC44LjguOAo=
  
  root in /usr/local/\/ssl λ openssl enc -a -d -in base64
  # Generated by NetworkManager
  search localdomain
  nameserver 114.114.114.114
  nameserver 8.8.8.8
  
  ```

  ```
  [root@k8smaster kubernetes]# awk '/^\s+client-certificate-data:/,/^\s+client-key-data:/ {print $0}' admin.conf  | grep client-key-data | cut -d : -f 2 > t
  [root@k8smaster kubernetes]# openssl enc -d -a -in t
  ŭ͑դЙEŭ=%ŕ-͵\¼!¹׵ёڕ̡͡1ס½¹.ɡMi
      㖕!Ɯ񲨴´´´µ9IMAI%YQ-d´´´´´(
  ```

- `-in`

  指定输入的文件，如果没有指定会从stdin中读入

  ```
  root in /usr/local/\/ssl λ openssl enc -des -e -in rsa
  enter des-cbc encryption password:
  Verifying - enter des-cbc encryption password:
  *** WARNING : deprecated key derivation used.
  Using -iter or -pbkdf2 would be better.
  Salted__|4]��9˧��z8~��,��ݏ����杠?J�_�i�2@�#�uC}�Ch�����^	m݄69�/�ɟRC4��0Y%�ai�1��wv��-TWG_|Zw�)���v�JZ��P���5
  ��aЊQL��<Q�Ғ�(�;���N
         �<C1�"��V��,L!R\1@�.��ҁl5Ÿ3�0�?����z�1J�(	�M�o}���|�݊��u
  ```

- `-out`

  指定输出的文件，如果没有会输出到stdout

- `-nosalt`

  不使用salt

- `-salt`

  加密时使用salt，默认会生成一个随机的salt

- `-S salt`

  指定salt，必须是十六进制，可以使用`xxd`来生成hex digit

  ```
  root in /usr/local/\/ssl λ openssl enc -des -S '7436' -in /etc/resolv.conf
  enter des-cbc encryption password:
  Verifying - enter des-cbc encryption password:
  hex string is too short, padding with zero bytes to length
  *** WARNING : deprecated key derivation used.
  Using -iter or -pbkdf2 would be better.
  Salted__t6����gٻ�Ncc\��}ߵ�r,���.�A�®�v̺�]���,YJLԄ�<_�z��,�B=N'�EF�b�����Q]�f:�[�E4q�ny�^m#  
  ```

#### 